(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{20:function(e,n,t){},38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var r=t(0),c=t(1),o=t.n(c),u=t(14),i=t.n(u),a=(t(20),t(3)),s=function(e){var n=e.filteredResults,t=e.handleFiltering;return Object(r.jsxs)("div",{children:["filter shown with ",Object(r.jsx)("input",{value:n,onChange:t})]})},l=function(e){var n=e.filteredResults,t=e.filteredPersons,c=e.persons,o=e.handleDelete,u=function(e){var n=e.person,t=e.handleDelete;return Object(r.jsx)("button",{onClick:function(){window.confirm("Do you want to delete ".concat(n.name," from phonebook?"))&&t(n.id),console.log(n.id)},children:"delete"})};return Object(r.jsx)("div",{children:n.length>1?t.map((function(e){return Object(r.jsxs)("div",{children:[Object(r.jsxs)("p",{children:[e.name," ",e.number]})," ",Object(r.jsx)(u,{person:e,handleDelete:o})]},e.id)})):c.map((function(e){return Object(r.jsxs)("div",{children:[Object(r.jsxs)("p",{children:[e.name," ",e.number," "]},e.id)," ",Object(r.jsx)(u,{person:e,handleDelete:o})]},e.id)}))})},d=function(e){var n=e.handleSubmit,t=e.newName,c=e.handleChange,o=e.newnumber,u=e.handlenumberChange;return Object(r.jsxs)("form",{onSubmit:n,children:[Object(r.jsxs)("div",{children:["name: ",Object(r.jsx)("input",{value:t,onChange:c})]}),Object(r.jsxs)("div",{children:["phone: ",Object(r.jsx)("input",{value:o,onChange:u})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})},f=t(4),j=t.n(f),b="http://localhost:3001/api/persons",h=function(){return j.a.get(b).then((function(e){return e.data}))},m=function(e){return j.a.post(b,e).then((function(e){return e.data}))},O=function(e,n){return j.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))},p=function(e){return j.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))},v=(t(38),function(){var e=Object(c.useState)([]),n=Object(a.a)(e,2),t=n[0],o=n[1],u=Object(c.useState)(""),i=Object(a.a)(u,2),f=i[0],j=i[1],b=Object(c.useState)(""),v=Object(a.a)(b,2),x=v[0],g=v[1],w=Object(c.useState)(""),S=Object(a.a)(w,2),T=S[0],y=S[1],C=Object(c.useState)([{}]),D=Object(a.a)(C,2),k=D[0],E=D[1],P=Object(c.useState)(""),R=Object(a.a)(P,2),F=R[0],N=R[1],J=Object(c.useState)(!1),L=Object(a.a)(J,2),B=L[0],I=L[1];Object(c.useEffect)((function(){h().then((function(e){o(e)}))}),[]);var M=function(e){var n=e.message,t=e.isError;return""===n?Object(r.jsx)("p",{}):t?Object(r.jsx)("p",{class:"error",children:n}):Object(r.jsx)("p",{class:"success",children:n})};return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"numberbook"}),Object(r.jsx)(M,{message:F,isError:B}),Object(r.jsx)(s,{filteredResults:T,handleFiltering:function(e){y(e.target.value),T.length>1&&E(t.filter((function(e){return e.name.toLowerCase().includes(T.toLowerCase())})))}}),Object(r.jsx)(d,{handleSubmit:function(e){if(t.map((function(e){return e.name===f})).some((function(e){return e}))){if(window.confirm("".concat(f," seems to be already added to numberbook. Do you want to update phone number?"))){e.preventDefault();var n={name:f,number:x},r=t.find((function(e){return e.name===f})).id;O(r,n).then((function(e){null===e?(o(t.filter((function(e){return e.id!==r}))),j(""),g(""),I(!0),N("".concat(n.name,"'s info was already deleted")),setTimeout((function(){return N("")}),3e3),setTimeout((function(){return I(!1)}),3e3),o(t.filter((function(e){return e.id!==r})))):(o(t.map((function(n){return n.id!==r?n:e}))),j(""),g(""),N("".concat(n.name,"'s phonenumber now successfully updated")),setTimeout((function(){return N("")}),3e3))})).catch((function(e){console.log("ErrorfoPost",e),j(""),g(""),I(!0),N("".concat(e.response.data.error)),setTimeout((function(){return N("")}),3e3),setTimeout((function(){return I(!1)}),3e3)}))}return e.preventDefault(),j(""),void g("")}e.preventDefault();var c={name:f,number:x};m(c).then((function(e){o(t.concat(e)),j(""),g(""),N("".concat(c.name," is now successfully added to phonebook")),setTimeout((function(){return N("")}),3e3)})).catch((function(e){j(""),g(""),I(!0),N("".concat(e.response.data.error)),console.log("ErrorForPost",e.response.data.error),setTimeout((function(){return N("")}),3e3),setTimeout((function(){return I(!1)}),3e3)}))},newName:f,handleChange:function(e){j(e.target.value)},newnumber:x,handlenumberChange:function(e){g(e.target.value)}}),Object(r.jsx)("h2",{children:"Numbers"}),Object(r.jsx)(l,{filteredResults:T,filteredPersons:k,persons:t,handleDelete:function(e){p(e).then((function(n){console.log("Errors? ",void 0!==n.error),N("".concat(t.find((function(n){return n.id===e})).name," is now successfully deleted")),o(t.filter((function(n){return n.id!==e}))),setTimeout((function(){return N("")}),3e3)})).catch((function(n){I(!0),N("".concat(t.find((function(n){return n.id===e})).name," was already deleted from server")),setTimeout((function(){return N("")}),3e3),setTimeout((function(){return I(!1)}),3e3),o(t.filter((function(n){return n.id!==e})))}))}})]})});i.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(v,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.29533d35.chunk.js.map